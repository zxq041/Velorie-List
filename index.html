<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logowanie – Mclist-Velorie.pl</title>
    <meta name="description" content="Zaloguj się, zarejestruj lub zarządzaj swoim serwerem Minecraft w panelu klienta Velorie.pl.">
    <meta name="theme-color" content="#0a1030">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { --accent: #ff0354; }
        body { background-color: #00010f; background-image: radial-gradient(1200px 600px at 80% -10%, #0a1030 0%, #050919 35%, #00010f 65%, #000000 100%); }
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 999px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.08); }
        @keyframes particle-animation { 0%, 100% { transform: translateY(0%) translateX(0%) rotate(0deg); } 50% { transform: translateY(-10%) translateX(5%) rotate(20deg); } }
        .particle { animation-name: particle-animation; animation-timing-function: ease-in-out; animation-iteration-count: infinite; }
        .nav-link.active { background-color: rgba(255, 255, 255, 0.1); color: #ffffff; font-weight: 600; }
        .nav-link.active i { color: var(--accent); }
        .code-comment { color: #8a93a5; }
    </style>
</head>
<body class="min-h-screen text-white selection:bg-[#ff0354]/40 selection:text-white">

    <div id="particles-container" aria-hidden="true" class="pointer-events-none fixed inset-0 overflow-hidden z-0"></div>

    <div id="auth-container" class="hidden">
        <header class="sticky top-0 z-50 backdrop-blur-xl bg-black/20 border-b border-white/10">
            <div class="mx-auto max-w-7xl px-4 py-3 flex items-center justify-between">
                <a href="/" class="flex items-center gap-3" aria-label="Strona główna">
                    <img src="https://i.imgur.com/ikYb7tH.png" alt="logo" class="h-10 w-10 rounded-xl ring-1 ring-white/10">
                    <div class="leading-tight">
                        <div class="text-lg font-semibold tracking-tight">Mclist-Velorie.pl</div>
                        <div class="text-xs text-white/60">Lista serwerów Minecraft</div>
                    </div>
                </a>
            </div>
        </header>
        <main class="relative z-10 flex items-center justify-center py-12 px-4" style="min-height: calc(100vh - 73px);">
            <div class="w-full max-w-md">
                <div class="relative rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-[0_10px_50px_rgba(0,0,0,0.4)] p-8">
                    <div id="login-form-container">
                        <h2 class="text-2xl font-bold text-center mb-1">Witaj ponownie!</h2>
                        <p class="text-white/60 text-sm text-center mb-6">Zaloguj się, aby kontynuować.</p>
                        <form id="login-form-element" class="space-y-4">
                            <div>
                                <label for="login-email" class="block text-sm font-medium text-white/80 mb-1">E-mail lub nazwa użytkownika</label>
                                <input type="text" id="login-email" required placeholder="twoj@email.com" class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition">
                            </div>
                            <div>
                                <label for="login-password" class="block text-sm font-medium text-white/80 mb-1">Hasło</label>
                                <input type="password" id="login-password" required placeholder="••••••••" class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition">
                            </div>
                            <button type="submit" class="w-full bg-[var(--accent)] text-white font-semibold py-3 rounded-lg hover:brightness-110 transition shadow-[0_8px_30px_rgba(255,3,84,0.35)]">Zaloguj się</button>
                        </form>
                        <div class="flex items-center gap-4 my-6"><hr class="w-full border-white/10"><span class="text-xs text-white/50">LUB</span><hr class="w-full border-white/10"></div>
                        <div class="space-y-3">
                           <a href="/auth/discord" class="w-full flex items-center justify-center gap-3 bg-white/5 border border-white/10 rounded-lg py-3 hover:bg-white/10 transition">
                            <img src="https://i.imgur.com/M88jgrc.png" alt="Discord logo" class="h-5 w-5">
                                <span>Kontynuuj z Discord</span>
                           </a>
                        </div>
                        <p class="text-center text-sm text-white/60 mt-6">
                            Nie masz konta? <button id="show-register-btn" class="font-semibold text-[var(--accent)] hover:underline">Zarejestruj się</button>
                        </p>
                    </div>
                    <div id="register-form-container" class="hidden">
                        <h2 class="text-2xl font-bold text-center mb-1">Stwórz konto</h2>
                        <p class="text-white/60 text-sm text-center mb-6">Dołącz do nas już dziś!</p>
                        <form id="register-form-element" class="space-y-4">
                            <div><label for="reg-username" class="block text-sm font-medium text-white/80 mb-1">Nazwa użytkownika</label><input type="text" id="reg-username" required placeholder="Twoja nazwa" class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition"></div>
                            <div><label for="reg-email" class="block text-sm font-medium text-white/80 mb-1">Adres e-mail</label><input type="email" id="reg-email" required placeholder="twoj@email.com" class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition"></div>
                            <div><label for="reg-password" class="block text-sm font-medium text-white/80 mb-1">Hasło</label><input type="password" id="reg-password" required placeholder="••••••••" class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition"></div>
                            <div><label for="reg-password-repeat" class="block text-sm font-medium text-white/80 mb-1">Powtórz hasło</label><input type="password" id="reg-password-repeat" required placeholder="••••••••" class="w-full bg-black/20 border border-white/10 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition"></div>
                            <button type="submit" class="w-full bg-[var(--accent)] text-white font-semibold py-3 rounded-lg hover:brightness-110 transition shadow-[0_8px_30px_rgba(255,3,84,0.35)]">Załóż konto</button>
                        </form>
                        <p class="text-center text-sm text-white/60 mt-6">
                            Masz już konto? <button id="show-login-btn" class="font-semibold text-[var(--accent)] hover:underline">Zaloguj się</button>
                        </p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="panel-container" class="hidden">
        <header class="sticky top-0 z-50 backdrop-blur-xl bg-black/20 border-b border-white/10">
            <div class="mx-auto max-w-7xl px-4 py-3 flex items-center justify-between gap-4">
                <a href="/" class="flex items-center gap-3 flex-shrink-0">
                    <img src="https://i.imgur.com/ikYb7tH.png" alt="logo" class="h-10 w-10 rounded-xl ring-1 ring-white/10">
                    <div class="leading-tight hidden sm:block">
                        <div class="text-lg font-semibold tracking-tight">Mclist-Velorie.pl</div>
                        <div class="text-xs text-white/60">Lista serwerów Minecraft</div>
                    </div>
                </a>
                <div class="flex items-center gap-2 md:gap-3 flex-shrink-0">
                    <div class="hidden sm:flex items-center gap-3 text-right">
                        <div>
                            <div id="header-username" class="font-semibold text-sm">...</div>
                            <div id="header-user-id" class="text-xs text-white/50 font-mono">ID: ...</div>
                        </div>
                        <i data-lucide="user-circle" class="h-9 w-9 text-white/70"></i>
                    </div>
                    <div class="w-px h-8 bg-white/10 hidden sm:block"></div>
                    <div class="hidden sm:flex items-center gap-2 rounded-lg bg-white/5 px-3 py-2 text-sm font-medium">
                        <i data-lucide="wallet" class="h-4 w-4 text-[var(--accent)]"></i>
                        <span id="header-vpln-balance">0.00 VPLN</span>
                    </div>
                    <div class="hidden sm:flex items-center gap-2 rounded-lg bg-white/5 px-3 py-2 text-sm font-medium">
                        <i data-lucide="circle-dollar-sign" class="h-4 w-4 text-yellow-400"></i>
                        <span id="header-coin-balance">0 VC</span>
                    </div>
                    <a href="#" id="logout-btn" class="inline-flex items-center gap-2 rounded-lg bg-[var(--accent)]/80 text-white px-4 py-2 text-sm font-medium hover:bg-[var(--accent)] transition">
                        <i data-lucide="log-out" class="h-4 w-4"></i>
                        <span class="hidden sm:inline">Wyloguj</span>
                    </a>
                </div>
            </div>
        </header>

        <main class="relative z-10 mx-auto max-w-7xl p-4 md:p-8">
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <aside class="lg:col-span-1">
                    <div class="p-4 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl sticky top-24">
                        <nav id="main-nav" class="flex flex-col gap-2">
                             <a href="#" data-view="panel" class="nav-link active flex items-center gap-4 px-5 py-4 rounded-lg text-base">
                                 <i data-lucide="layout-dashboard" class="h-6 w-6"></i>
                                 <span>Panel Klienta</span>
                             </a>
                             <a href="#" data-view="add-server" class="nav-link flex items-center gap-4 px-5 py-4 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition text-base">
                                 <i data-lucide="plus-circle" class="h-6 w-6"></i>
                                 <span>Dodaj Serwer</span>
                             </a>
                             <a href="#" data-view="wallet" class="nav-link flex items-center gap-4 px-5 py-4 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition text-base">
                                 <i data-lucide="wallet" class="h-6 w-6"></i>
                                 <span>Portfel</span>
                             </a>
                             <a href="#" data-view="store" class="nav-link flex items-center gap-4 px-5 py-4 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition text-base">
                                 <i data-lucide="shopping-cart" class="h-6 w-6"></i>
                                 <span>Sklep</span>
                             </a>
                             <a href="#" data-view="plugin" class="nav-link flex items-center gap-4 px-5 py-4 rounded-lg text-white/70 hover:bg-white/5 hover:text-white transition text-base">
                                 <i data-lucide="puzzle" class="h-6 w-6"></i>
                                 <span>Plugin</span>
                             </a>
                        </nav>
                    </div>
                </aside>

                <div class="lg:col-span-4">
                    <section id="view-panel" class="view-content space-y-8">
                         <div>
                             <h1 class="text-4xl font-bold">Witaj w Panelu Klienta!</h1>
                             <p class="text-lg text-white/60 mt-2">Zarządzaj swoimi serwerami, przeglądaj sklep i pobierz nasz plugin.</p>
                         </div>
                         <div class="p-6 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl">
                             <div class="flex items-center justify-between">
                                 <h2 class="text-xl font-semibold">Twoje Serwery</h2>
                                 <span class="text-sm font-medium text-white/50 bg-white/5 px-3 py-1 rounded-full">0 / 1</span>
                             </div>
                             <div class="text-center py-12 mt-4 border-2 border-dashed border-white/10 rounded-lg">
                                 <i data-lucide="server-off" class="h-12 w-12 mx-auto text-white/30"></i>
                                 <p class="mt-4 text-white/60">Nie posiadasz jeszcze żadnego serwera.</p>
                                 <button id="add-first-server-btn" class="mt-6 inline-flex items-center justify-center gap-2 rounded-lg bg-[var(--accent)] px-5 py-3 font-semibold hover:brightness-110 transition shadow-[0_8px_30px_rgba(255,3,84,0.35)]">
                                     <i data-lucide="plus" class="h-5 w-5"></i>
                                     <span>Dodaj swój pierwszy serwer</span>
                                 </button>
                             </div>
                         </div>
                    </section>
                    <section id="view-add-server" class="view-content space-y-8 hidden">
                        <div class="p-8 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl space-y-6">
                            <h3 class="text-xl font-bold">Wypełnij dane swojego serwera</h3>
                            <form id="add-server-form">
                                <div class="space-y-4">
                                    <div>
                                        <label for="server-address" class="block text-base font-medium text-white/80 mb-2">Adres IP serwera</label>
                                        <input type="text" id="server-address" placeholder="velorie.pl" class="w-full bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition" required>
                                    </div>
                                    <div>
                                        <label for="server-version" class="block text-base font-medium text-white/80 mb-2">Wersja serwera</label>
                                        <select id="server-version" class="w-full bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition" required>
                                            <option>1.21.x</option><option>1.20.x</option><option>1.19.x</option><option>1.18.x</option><option>1.17.x</option><option>1.16.x</option><option>1.12.x</option><option>1.8.x</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="server-gamemode" class="block text-base font-medium text-white/80 mb-2">Tryb gry</label>
                                        <select id="server-gamemode" class="w-full bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition" required>
                                            <option>Survival</option><option>Creative</option><option>Skyblock</option><option>BedWars</option><option>Hardcore</option><option>RPG</option><option>Inny</option>
                                        </select>
                                    </div>
                                </div>
                                <hr class="border-t border-white/10 my-6">
                                <button type="submit" class="w-full bg-[var(--accent)] text-white font-semibold py-3 rounded-lg hover:brightness-110 transition shadow-[0_8px_30px_rgba(255,3,84,0.35)]">
                                    Zatwierdź i dodaj serwer
                                </button>
                            </form>
                        </div>
                    </section>
                    <section id="view-wallet" class="view-content space-y-8 hidden">
                        <div>
                            <h1 class="text-4xl font-bold">Portfel</h1>
                            <p class="text-lg text-white/60 mt-2">Zarządzaj swoimi środkami VPLN i przeglądaj historię transakcji.</p>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                            <div class="p-8 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl space-y-6">
                                <h2 class="text-2xl font-bold">Doładowanie portfela</h2>
                                <p class="text-white/70">Wpisz kwotę i wybierz metodę płatności, aby doładować portfel środkami VPLN.</p>
                                <div>
                                    <label for="amount" class="block text-base font-medium text-white/80 mb-2">Kwota doładowania (PLN)</label>
                                    <input type="number" id="amount" placeholder="np. 50" class="w-full bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-[var(--accent)] transition">
                                </div>
                                <div>
                                    <label class="block text-base font-medium text-white/80 mb-2">Wybierz metodę płatności</label>
                                    <div class="grid grid-cols-3 gap-3">
                                        <button class="text-center p-4 border-2 border-[var(--accent)] bg-[var(--accent)]/10 rounded-lg font-semibold transition">Przelew</button>
                                        <button class="text-center p-4 border-2 border-white/10 hover:border-white/30 rounded-lg font-semibold transition">BLIK</button>
                                        <button class="text-center p-4 border-2 border-white/10 hover:border-white/30 rounded-lg font-semibold transition">PayPal</button>
                                    </div>
                                </div>
                                <button class="w-full inline-flex items-center justify-center gap-2 rounded-lg bg-[var(--accent)] px-5 py-3 font-semibold hover:brightness-110 transition shadow-[0_8px_30px_rgba(255,3,84,0.35)]">
                                    <i data-lucide="credit-card" class="h-5 w-5"></i>
                                    <span>Doładuj Portfel</span>
                                </button>
                            </div>
                            <div class="p-8 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl">
                                <h2 class="text-2xl font-bold mb-4">Historia Operacji</h2>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left">
                                        <thead class="border-b border-white/10 text-sm text-white/60">
                                            <tr><th class="p-3">ID</th><th class="p-3">Data</th><th class="p-3">Kwota</th><th class="p-3">Status</th></tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b border-white/10"><td class="p-3 font-mono text-xs">#F8A2D4</td><td class="p-3 text-sm">20.08.2025</td><td class="p-3 font-semibold text-white">50 VPLN</td><td class="p-3"><span class="text-xs font-bold bg-green-500/10 text-green-400 px-2 py-1 rounded-full">Zakończona</span></td></tr>
                                            <tr class="border-b border-white/10"><td class="p-3 font-mono text-xs">#E3B1A9</td><td class="p-3 text-sm">15.07.2025</td><td class="p-3 font-semibold text-white">20 VPLN</td><td class="p-3"><span class="text-xs font-bold bg-green-500/10 text-green-400 px-2 py-1 rounded-full">Zakończona</span></td></tr>
                                            <tr class="border-b border-white/10"><td class="p-3 font-mono text-xs">#C9A8F1</td><td class="p-3 text-sm">02.06.2025</td><td class="p-3 font-semibold text-white">100 VPLN</td><td class="p-3"><span class="text-xs font-bold bg-yellow-500/10 text-yellow-400 px-2 py-1 rounded-full">Oczekująca</span></td></tr>
                                            <tr><td class="p-3 font-mono text-xs">#B5F3E7</td><td class="p-3 text-sm">28.05.2025</td><td class="p-3 font-semibold text-white">10 VPLN</td><td class="p-3"><span class="text-xs font-bold bg-red-500/10 text-red-400 px-2 py-1 rounded-full">Anulowana</span></td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="view-store" class="view-content space-y-8 hidden">
                        <div>
                            <h1 class="text-4xl font-bold">Sklep i Usługi Premium</h1>
                            <p class="text-lg text-white/60 mt-2">Wybierz jeden z pakietów, aby zwiększyć widoczność swojego serwera i dotrzeć do nowych graczy.</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                            <div class="h-full flex flex-col p-8 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl ring-2 ring-[var(--accent)] shadow-2xl shadow-[var(--accent)]/10">
                                <div class="flex-grow">
                                    <div class="p-4 rounded-full bg-[var(--accent)]/10 text-[var(--accent)] w-min mb-4"><i data-lucide="gallery-horizontal" class="h-8 w-8"></i></div>
                                    <h2 class="text-2xl font-bold">Baner Reklamowy</h2>
                                    <p class="text-5xl font-black my-4">119<span class="text-3xl font-bold text-white/70">.99 zł</span><span class="text-base font-medium text-white/50"> / miesiąc</span></p>
                                    <ul class="space-y-3 text-white/80">
                                        <li class="flex items-start gap-3"><i data-lucide="check" class="h-5 w-5 text-[var(--accent)] mt-1 flex-shrink-0"></i><span>Wymiar banneru reklamowego 1600x400</span></li>
                                        <li class="flex items-start gap-3"><i data-lucide="check" class="h-5 w-5 text-[var(--accent)] mt-1 flex-shrink-0"></i><span><span class="font-semibold text-white">Maksymalna widoczność</span> serwera</span></li>
                                        <li class="flex items-start gap-3"><i data-lucide="check" class="h-5 w-5 text-[var(--accent)] mt-1 flex-shrink-0"></i><span>Reklama na stronie głównej przez <span class="font-semibold text-white">30 dni</span></span></li>
                                    </ul>
                                </div>
                                <a href="#" class="mt-8 w-full inline-flex items-center justify-center gap-2 rounded-lg bg-[var(--accent)] px-5 py-3 font-semibold hover:brightness-110 transition shadow-[0_8px_30px_rgba(255,3,84,0.35)]"><i data-lucide="shopping-cart" class="h-5 w-5"></i><span>Wybieram Pakiet</span></a>
                            </div>
                            <div class="h-full flex flex-col p-8 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl">
                               <div class="flex-grow">
                                    <div class="p-4 rounded-full bg-white/10 text-cyan-400 w-min mb-4"><i data-lucide="rocket" class="h-8 w-8"></i></div>
                                    <h2 class="text-2xl font-bold">Booster</h2>
                                    <div class="my-4">
                                        <div class="flex items-center justify-center gap-4 mb-2">
                                            <button id="booster-minus-btn" class="p-2 rounded-full bg-white/10 hover:bg-white/20 transition disabled:opacity-50 disabled:cursor-not-allowed"><i data-lucide="minus" class="h-5 w-5"></i></button>
                                            <span id="booster-quantity" class="text-2xl font-bold w-12 text-center">1</span>
                                            <button id="booster-plus-btn" class="p-2 rounded-full bg-white/10 hover:bg-white/20 transition"><i data-lucide="plus" class="h-5 w-5"></i></button>
                                        </div>
                                        <p id="booster-price" class="text-center text-5xl font-black">27<span class="text-3xl font-bold text-white/70">,99 zł</span><span id="booster-duration" class="block text-base font-medium text-white/50">za 30 dni</span></p>
                                    </div>
                                    <ul class="space-y-3 text-white/80">
                                        <li class="flex items-start gap-3"><i data-lucide="check" class="h-5 w-5 text-[var(--accent)] mt-1 flex-shrink-0"></i><span><span class="font-semibold text-white">Wyższe pozycjonowanie</span> na stronie</span></li>
                                        <li class="flex items-start gap-3"><i data-lucide="check" class="h-5 w-5 text-[var(--accent)] mt-1 flex-shrink-0"></i><span>Specjalna ranga na discord</span></li>
                                    </ul>
                               </div>
                               <a href="#" class="mt-8 w-full inline-flex items-center justify-center gap-2 rounded-lg bg-white/10 px-5 py-3 font-semibold hover:bg-white/20 transition"><i data-lucide="shopping-cart" class="h-5 w-5"></i><span>Wybieram Pakiet</span></a>
                            </div>
                        </div>
                    </section>
                    <section id="view-plugin" class="view-content hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="p-8 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl space-y-6">
                                <h1 class="text-3xl font-bold">Instalacja</h1>
                                <a href="#" class="w-full inline-flex items-center justify-center gap-2 rounded-lg bg-[var(--accent)] px-5 py-3 font-semibold hover:brightness-110 transition shadow-[0_8px_30px_rgba(255,3,84,0.35)]">
                                    <i data-lucide="download" class="h-5 w-5"></i>
                                    <span>Pobierz plugin (1.8 - 1.21.8)</span>
                                </a>
                                <p class="text-white/70">W pliku konfiguracyjnym <code class="bg-black/30 px-1 py-0.5 rounded text-white/80">config.yml</code> umieść swój unikatowy identyfikator serwera.</p>
                                <div class="space-y-3">
                                    <h3 class="font-semibold">Wybierz serwer, aby wyświetlić identyfikator</h3>
                                    <select disabled class="w-full bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-white/60 focus:outline-none cursor-not-allowed">
                                        <option>Nie posiadasz jeszcze żadnego serwera</option>
                                    </select>
                                    <div>
                                        <label class="block text-sm text-white/60 mb-1">Twój unikatowy identyfikator:</label>
                                        <div class="relative">
                                            <input id="server-id" type="text" readonly value="---" class="w-full bg-black/50 border border-white/10 rounded-lg pl-4 pr-12 py-3 text-white/80 font-mono cursor-text">
                                            <button data-copy-target="#server-id" class="copy-btn absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-md hover:bg-white/10">
                                                <i data-lucide="copy" class="h-5 w-5 text-white/60"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="relative p-1 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl">
                               <div class="absolute top-4 right-4 z-10">
                                    <button data-copy-target="#config-code" class="copy-btn flex items-center gap-2 text-xs bg-black/50 border border-white/10 px-3 py-2 rounded-lg hover:bg-white/10 transition">
                                        <i data-lucide="copy" class="h-4 w-4"></i>
                                        <span>Kopiuj</span>
                                    </button>
                               </div>
                               <div class="bg-black/40 p-6 rounded-xl h-full font-mono text-sm overflow-x-auto">
                                    <h2 class="text-xl font-bold text-white mb-4">Konfiguracja <span class="text-white/60">(config.yml)</span></h2>
                                    <pre><code id="config-code"><span class="code-comment"># Konfiguracja pluginu VelorieConnector</span>
<span class="code-comment"># Wersja 1.0</span>
<span style="color: #67e8f9;">server-identifier:</span> <span style="color: #f87171;">'---'</span>
<span style="color: #67e8f9;">messages:</span>
  <span style="color: #a78bfa;">vote-broadcast:</span> <span style="color: #facc15;">'&a[Velorie] &7Gracz &e%player% &7zagłosował!'</span>
</code></pre>
                               </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const authContainer = document.getElementById('auth-container');
        const panelContainer = document.getElementById('panel-container');
        const authToken = localStorage.getItem('authToken');

        // --- GŁÓWNA LOGIKA WYŚWIETLANIA ---
        if (authToken) {
            authContainer.classList.add('hidden');
            panelContainer.classList.remove('hidden');
            initializePanel();
        } else {
            authContainer.classList.remove('hidden');
            panelContainer.classList.add('hidden');
            initializeAuthForms();
        }

        // --- Inicjalizacja formularzy logowania/rejestracji ---
        function initializeAuthForms() {
            const loginFormContainer = document.getElementById('login-form-container');
            const registerFormContainer = document.getElementById('register-form-container');
            const showRegisterBtn = document.getElementById('show-register-btn');
            const showLoginBtn = document.getElementById('show-login-btn');

            showRegisterBtn.addEventListener('click', () => {
                loginFormContainer.classList.add('hidden');
                registerFormContainer.classList.remove('hidden');
            });
            showLoginBtn.addEventListener('click', () => {
                registerFormContainer.classList.add('hidden');
                loginFormContainer.classList.remove('hidden');
            });

            const registerForm = document.getElementById('register-form-element');
            registerForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const username = document.getElementById('reg-username').value;
                const email = document.getElementById('reg-email').value;
                const password = document.getElementById('reg-password').value;
                const passwordRepeat = document.getElementById('reg-password-repeat').value;
                if (password !== passwordRepeat) {
                    alert('Hasła nie są takie same!');
                    return;
                }
                try {
                    const response = await fetch('/api/register', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ username, email, password })
                    });
                    const result = await response.json();
                    alert(result.message);
                    if (response.ok) { window.location.reload(); }
                } catch (error) {
                    alert("Wystąpił błąd sieci. Upewnij się, że serwer jest uruchomiony.");
                }
            });

            const loginForm = document.getElementById('login-form-element');
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                try {
                    const response = await fetch('/api/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, password })
                    });
                    const result = await response.json();
                    if (response.ok) {
                        localStorage.setItem('authToken', result.token);
                        window.location.reload();
                    } else {
                        alert(result.message);
                    }
                } catch(error) {
                    alert("Wystąpił błąd sieci. Upewnij się, że serwer jest uruchomiony.");
                }
            });
        }

        // --- Inicjalizacja Panelu Klienta ---
        function initializePanel() {
            async function fetchUserData() {
                const token = localStorage.getItem('authToken');
                if (!token) return;

                try {
                    const response = await fetch('/api/user', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    if (!response.ok) {
                        localStorage.removeItem('authToken');
                        window.location.reload();
                        return;
                    }
                    const userData = await response.json();
                    updateHeaderUI(userData);
                } catch (error) {
                    console.error('Błąd pobierania danych użytkownika:', error);
                }
            }

            function updateHeaderUI(userData) {
                document.getElementById('header-username').textContent = userData.username;
                document.getElementById('header-user-id').textContent = `ID: ${userData.id}`;
                document.getElementById('header-vpln-balance').textContent = `${userData.vpln.toFixed(2)} VPLN`;
                document.getElementById('header-coin-balance').textContent = `${userData.vc} VC`;
            }

            document.getElementById('logout-btn').addEventListener('click', (e) => {
                e.preventDefault();
                localStorage.removeItem('authToken');
                window.location.reload();
            });

            const navLinks = document.querySelectorAll('#main-nav .nav-link');
            const contentSections = document.querySelectorAll('.view-content');
            function switchView(targetView) {
                contentSections.forEach(section => section.classList.add('hidden'));
                const activeSection = document.getElementById(`view-${targetView}`);
                if (activeSection) activeSection.classList.remove('hidden');

                navLinks.forEach(navLink => {
                    navLink.classList.remove('active');
                    if (navLink.dataset.view === targetView) {
                        navLink.classList.add('active');
                        document.title = `${navLink.querySelector('span').textContent} – Mclist-Velorie.pl`;
                    }
                });
            }
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    switchView(link.dataset.view);
                });
            });
            document.getElementById('add-first-server-btn')?.addEventListener('click', () => switchView('add-server'));

            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetSelector = btn.dataset.copyTarget;
                    const targetElement = document.querySelector(targetSelector);
                    if (targetElement) {
                        const valueToCopy = targetElement.value || targetElement.innerText;
                        navigator.clipboard.writeText(valueToCopy).then(() => {
                           const originalText = btn.innerHTML;
                           btn.innerHTML = 'Skopiowano!';
                           setTimeout(() => btn.innerHTML = originalText, 2000);
                        });
                    }
                });
            });

            // LOGIKA DLA LICZNIKA BOOSTERÓW
            const boosterMinusBtn = document.getElementById('booster-minus-btn');
            const boosterPlusBtn = document.getElementById('booster-plus-btn');
            const boosterQuantityEl = document.getElementById('booster-quantity');
            const boosterPriceEl = document.getElementById('booster-price');
            let boosterQuantity = 1;
            function updateBoosterPrice() {
                const basePrice = 27.99;
                const additionalPrice = 10.00;
                let finalPrice = basePrice + (boosterQuantity - 1) * additionalPrice;
                boosterQuantityEl.textContent = boosterQuantity;
                boosterPriceEl.innerHTML = `${finalPrice.toFixed(2).replace('.', ',')}<span class="text-3xl font-bold text-white/70"> zł</span><span class="block text-base font-medium text-white/50">za ${boosterQuantity * 30} dni</span>`;
                boosterMinusBtn.disabled = boosterQuantity === 1;
            }
            if(boosterPlusBtn) boosterPlusBtn.addEventListener('click', () => { boosterQuantity++; updateBoosterPrice(); });
            if(boosterMinusBtn) boosterMinusBtn.addEventListener('click', () => { if (boosterQuantity > 1) { boosterQuantity--; updateBoosterPrice(); } });
            if(boosterPriceEl) updateBoosterPrice();
            
            fetchUserData();
        }

        // --- Wspólne funkcje ---
        const createParticles = () => {
            const container = document.getElementById('particles-container');
            if (!container || container.childElementCount > 0) return;
            const particleCount = 28;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('span');
                const size = 24 + (i % 5) * 12;
                particle.className = 'absolute rounded-full opacity-20 blur-2xl particle';
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.background = i % 3 ? 'var(--accent)' : "#4f46e5";
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDuration = `${10 + (i % 5)}s`;
                particle.style.animationDelay = `${i * 0.2}s`;
                container.appendChild(particle);
            }
        };

        createParticles();
        lucide.createIcons();
    });
    </script>
</body>
</html>

